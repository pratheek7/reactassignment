{"ast":null,"code":"/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { toConsumableArray as _toConsumableArray } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport findLast from 'lodash.findlast';\nimport { DOCUMENT_POSITION_BROAD_PRECEDING, selectorTabbable, DOCUMENT_POSITION_BROAD_FOLLOWING } from './keyboard/navigation.js';\n\n/**\n * @param {Node} node A DOM node.\n * @param {string[]} selectorsFloatingMenus The CSS selectors that matches floating menus.\n * @returns {boolean} `true` of the given `node` is in a floating menu.\n */\n\nfunction elementOrParentIsFloatingMenu(node) {\n  var selectorsFloatingMenus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  if (node && typeof node.closest === 'function') {\n    var allSelectorsFloatingMenus = [\".cds--overflow-menu-options\", \".cds--tooltip\", '.flatpickr-calendar'].concat(_toConsumableArray(selectorsFloatingMenus));\n    return allSelectorsFloatingMenus.some(function (selector) {\n      return node.closest(selector);\n    });\n  }\n}\n/**\n * Ensures the focus is kept in the given `modalNode`, implementing \"focus-wrap\" behavior.\n * @param {object} options The options.\n * @param {Node} options.bodyNode\n * @param {Node} options.startTrapNode The DOM node of the focus sentinel the is placed earlier next to `modalNode`.\n * @param {Node} options.endTrapNode The DOM node of the focus sentinel the is placed next to `modalNode`.\n * @param {Node} options.currentActiveNode The DOM node that has focus.\n * @param {Node} options.oldActiveNode The DOM node that previously had focus.\n * @param {Node} [options.selectorsFloatingMenus] The CSS selectors that matches floating menus.\n */\n\nfunction wrapFocus(_ref) {\n  var bodyNode = _ref.bodyNode,\n    startTrapNode = _ref.startTrapNode,\n    endTrapNode = _ref.endTrapNode,\n    currentActiveNode = _ref.currentActiveNode,\n    oldActiveNode = _ref.oldActiveNode,\n    selectorsFloatingMenus = _ref.selectorsFloatingMenus;\n  if (bodyNode && currentActiveNode && oldActiveNode && !bodyNode.contains(currentActiveNode) && !elementOrParentIsFloatingMenu(currentActiveNode, selectorsFloatingMenus)) {\n    var comparisonResult = oldActiveNode.compareDocumentPosition(currentActiveNode);\n    if (currentActiveNode === startTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_PRECEDING) {\n      var tabbable = findLast(bodyNode.querySelectorAll(selectorTabbable), function (elem) {\n        return Boolean(elem.offsetParent);\n      });\n      if (tabbable) {\n        tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    } else if (currentActiveNode === endTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_FOLLOWING) {\n      var _tabbable = Array.prototype.find.call(bodyNode.querySelectorAll(selectorTabbable), function (elem) {\n        return Boolean(elem.offsetParent);\n      });\n      if (_tabbable) {\n        _tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    }\n  }\n}\nexport { wrapFocus as default, elementOrParentIsFloatingMenu };","map":{"version":3,"names":["toConsumableArray","_toConsumableArray","findLast","DOCUMENT_POSITION_BROAD_PRECEDING","selectorTabbable","DOCUMENT_POSITION_BROAD_FOLLOWING","elementOrParentIsFloatingMenu","node","selectorsFloatingMenus","arguments","length","undefined","closest","allSelectorsFloatingMenus","concat","some","selector","wrapFocus","_ref","bodyNode","startTrapNode","endTrapNode","currentActiveNode","oldActiveNode","contains","comparisonResult","compareDocumentPosition","tabbable","querySelectorAll","elem","Boolean","offsetParent","focus","_tabbable","Array","prototype","find","call","default"],"sources":["C:/Users/Administrator/Desktop/nerf/node_modules/@carbon/react/es/internal/wrapFocus.js"],"sourcesContent":["/**\n * Copyright IBM Corp. 2016, 2022\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { toConsumableArray as _toConsumableArray } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport findLast from 'lodash.findlast';\nimport { DOCUMENT_POSITION_BROAD_PRECEDING, selectorTabbable, DOCUMENT_POSITION_BROAD_FOLLOWING } from './keyboard/navigation.js';\n\n/**\n * @param {Node} node A DOM node.\n * @param {string[]} selectorsFloatingMenus The CSS selectors that matches floating menus.\n * @returns {boolean} `true` of the given `node` is in a floating menu.\n */\n\nfunction elementOrParentIsFloatingMenu(node) {\n  var selectorsFloatingMenus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (node && typeof node.closest === 'function') {\n    var allSelectorsFloatingMenus = [\".cds--overflow-menu-options\", \".cds--tooltip\", '.flatpickr-calendar'].concat(_toConsumableArray(selectorsFloatingMenus));\n    return allSelectorsFloatingMenus.some(function (selector) {\n      return node.closest(selector);\n    });\n  }\n}\n/**\n * Ensures the focus is kept in the given `modalNode`, implementing \"focus-wrap\" behavior.\n * @param {object} options The options.\n * @param {Node} options.bodyNode\n * @param {Node} options.startTrapNode The DOM node of the focus sentinel the is placed earlier next to `modalNode`.\n * @param {Node} options.endTrapNode The DOM node of the focus sentinel the is placed next to `modalNode`.\n * @param {Node} options.currentActiveNode The DOM node that has focus.\n * @param {Node} options.oldActiveNode The DOM node that previously had focus.\n * @param {Node} [options.selectorsFloatingMenus] The CSS selectors that matches floating menus.\n */\n\n\nfunction wrapFocus(_ref) {\n  var bodyNode = _ref.bodyNode,\n      startTrapNode = _ref.startTrapNode,\n      endTrapNode = _ref.endTrapNode,\n      currentActiveNode = _ref.currentActiveNode,\n      oldActiveNode = _ref.oldActiveNode,\n      selectorsFloatingMenus = _ref.selectorsFloatingMenus;\n\n  if (bodyNode && currentActiveNode && oldActiveNode && !bodyNode.contains(currentActiveNode) && !elementOrParentIsFloatingMenu(currentActiveNode, selectorsFloatingMenus)) {\n    var comparisonResult = oldActiveNode.compareDocumentPosition(currentActiveNode);\n\n    if (currentActiveNode === startTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_PRECEDING) {\n      var tabbable = findLast(bodyNode.querySelectorAll(selectorTabbable), function (elem) {\n        return Boolean(elem.offsetParent);\n      });\n\n      if (tabbable) {\n        tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    } else if (currentActiveNode === endTrapNode || comparisonResult & DOCUMENT_POSITION_BROAD_FOLLOWING) {\n      var _tabbable = Array.prototype.find.call(bodyNode.querySelectorAll(selectorTabbable), function (elem) {\n        return Boolean(elem.offsetParent);\n      });\n\n      if (_tabbable) {\n        _tabbable.focus();\n      } else if (bodyNode !== oldActiveNode) {\n        bodyNode.focus();\n      }\n    }\n  }\n}\n\nexport { wrapFocus as default, elementOrParentIsFloatingMenu };\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,iBAAiB,IAAIC,kBAAkB,QAAQ,0CAA0C;AAClG,OAAOC,QAAQ,MAAM,iBAAiB;AACtC,SAASC,iCAAiC,EAAEC,gBAAgB,EAAEC,iCAAiC,QAAQ,0BAA0B;;AAEjI;AACA;AACA;AACA;AACA;;AAEA,SAASC,6BAA6B,CAACC,IAAI,EAAE;EAC3C,IAAIC,sBAAsB,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;EAEnG,IAAIF,IAAI,IAAI,OAAOA,IAAI,CAACK,OAAO,KAAK,UAAU,EAAE;IAC9C,IAAIC,yBAAyB,GAAG,CAAC,6BAA6B,EAAE,eAAe,EAAE,qBAAqB,CAAC,CAACC,MAAM,CAACb,kBAAkB,CAACO,sBAAsB,CAAC,CAAC;IAC1J,OAAOK,yBAAyB,CAACE,IAAI,CAAC,UAAUC,QAAQ,EAAE;MACxD,OAAOT,IAAI,CAACK,OAAO,CAACI,QAAQ,CAAC;IAC/B,CAAC,CAAC;EACJ;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASC,SAAS,CAACC,IAAI,EAAE;EACvB,IAAIC,QAAQ,GAAGD,IAAI,CAACC,QAAQ;IACxBC,aAAa,GAAGF,IAAI,CAACE,aAAa;IAClCC,WAAW,GAAGH,IAAI,CAACG,WAAW;IAC9BC,iBAAiB,GAAGJ,IAAI,CAACI,iBAAiB;IAC1CC,aAAa,GAAGL,IAAI,CAACK,aAAa;IAClCf,sBAAsB,GAAGU,IAAI,CAACV,sBAAsB;EAExD,IAAIW,QAAQ,IAAIG,iBAAiB,IAAIC,aAAa,IAAI,CAACJ,QAAQ,CAACK,QAAQ,CAACF,iBAAiB,CAAC,IAAI,CAAChB,6BAA6B,CAACgB,iBAAiB,EAAEd,sBAAsB,CAAC,EAAE;IACxK,IAAIiB,gBAAgB,GAAGF,aAAa,CAACG,uBAAuB,CAACJ,iBAAiB,CAAC;IAE/E,IAAIA,iBAAiB,KAAKF,aAAa,IAAIK,gBAAgB,GAAGtB,iCAAiC,EAAE;MAC/F,IAAIwB,QAAQ,GAAGzB,QAAQ,CAACiB,QAAQ,CAACS,gBAAgB,CAACxB,gBAAgB,CAAC,EAAE,UAAUyB,IAAI,EAAE;QACnF,OAAOC,OAAO,CAACD,IAAI,CAACE,YAAY,CAAC;MACnC,CAAC,CAAC;MAEF,IAAIJ,QAAQ,EAAE;QACZA,QAAQ,CAACK,KAAK,EAAE;MAClB,CAAC,MAAM,IAAIb,QAAQ,KAAKI,aAAa,EAAE;QACrCJ,QAAQ,CAACa,KAAK,EAAE;MAClB;IACF,CAAC,MAAM,IAAIV,iBAAiB,KAAKD,WAAW,IAAII,gBAAgB,GAAGpB,iCAAiC,EAAE;MACpG,IAAI4B,SAAS,GAAGC,KAAK,CAACC,SAAS,CAACC,IAAI,CAACC,IAAI,CAAClB,QAAQ,CAACS,gBAAgB,CAACxB,gBAAgB,CAAC,EAAE,UAAUyB,IAAI,EAAE;QACrG,OAAOC,OAAO,CAACD,IAAI,CAACE,YAAY,CAAC;MACnC,CAAC,CAAC;MAEF,IAAIE,SAAS,EAAE;QACbA,SAAS,CAACD,KAAK,EAAE;MACnB,CAAC,MAAM,IAAIb,QAAQ,KAAKI,aAAa,EAAE;QACrCJ,QAAQ,CAACa,KAAK,EAAE;MAClB;IACF;EACF;AACF;AAEA,SAASf,SAAS,IAAIqB,OAAO,EAAEhC,6BAA6B"},"metadata":{},"sourceType":"module","externalDependencies":[]}